<div class="container">
  <div class="current-user-section">
    <div class="user-card">
      <h1>Usuario Actual</h1>
      
      <div class="user-details">
        <div class="user-field">
          <label>ID:</label>
          <p>{{user.id}}</p>
        </div>
        
        <div class="user-field">
          <label>Email:</label>
          <p>{{user.email}}</p>
        </div>
        
        <div class="user-field">
          <label>Rol:</label>
          <p>
            {{#if (eq user.role 'admin')}}
              <span class="badge badge-admin">ðŸ‘‘ Administrador</span>
            {{else}}
              <span class="badge badge-user">ðŸ‘¤ Usuario</span>
            {{/if}}
          </p>
        </div>
      </div>

      <div class="user-actions">
        <button id="logoutBtn" class="btn-danger">Cerrar SesiÃ³n</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Helper para comparar valores
  Handlebars.registerHelper('eq', function(a, b) {
    return a === b;
  });

  // Cerrar sesiÃ³n
  document.getElementById('logoutBtn').addEventListener('click', async () => {
    try {
      const response = await fetch('/api/users/logout', {
        method: 'POST'
      });
      
      const data = await response.json();
      
      if (data.status === 'success') {
        window.location.href = data.redirect || '/users/login';
      }
    } catch (error) {
      console.error('Error al cerrar sesiÃ³n:', error);
      window.location.href = '/users/login';
    }
  });
</script>

<style>
  .current-user-section {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 2rem;
  }

  .user-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 3rem;
    max-width: 500px;
    width: 100%;
  }

  .user-card h1 {
    text-align: center;
    color: #333;
    margin-bottom: 2rem;
  }

  .user-details {
    margin-bottom: 2rem;
  }

  .user-field {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #eee;
  }

  .user-field label {
    display: block;
    font-weight: bold;
    color: #666;
    margin-bottom: 0.5rem;
  }

  .user-field p {
    margin: 0;
    color: #333;
    font-size: 1.1rem;
    word-break: break-all;
  }

  .badge {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
  }

  .badge-admin {
    background: #ffd700;
    color: #333;
  }

  .badge-user {
    background: #e7f3ff;
    color: #0066cc;
  }

  .user-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  .btn-danger {
    padding: 0.75rem 2rem;
    background: #dc3545;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
  }

  .btn-danger:hover {
    background: #c82333;
  }
</style>
